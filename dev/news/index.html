<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • googledrive</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://googledrive.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="googledrive.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">googledrive</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/googledrive.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/file-identification.html">File Identification</a></li>
    <li><a class="dropdown-item" href="../articles/multiple-files.html">Dealing with multiple files</a></li>
    <li><a class="dropdown-item" href="../articles/permissions.html">File permissions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Package configuration</h6></li>
    <li><a class="dropdown-item" href="../articles/bring-your-own-client.html">Bring your own OAuth client or API key</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/07/googledrive-2-0-0/">Version 2.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2019/08/googledrive-1-0-0/">Version 1.0.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/googledrive/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/tidyverse/googledrive/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="googledrive-development-version">googledrive (development version)<a class="anchor" aria-label="anchor" href="#googledrive-development-version"></a></h2>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.1" id="googledrive-211">googledrive 2.1.1<a class="anchor" aria-label="anchor" href="#googledrive-211"></a></h2><p class="text-muted">CRAN release: 2023-06-11</p>
<ul><li><p><code>drive_auth(subject =)</code> is a new argument that can be used with <code>drive_auth(path =)</code>, i.e. when using a service account. The <code>path</code> and <code>subject</code> arguments are ultimately processed by <code><a href="https://gargle.r-lib.org/reference/credentials_service_account.html" class="external-link">gargle::credentials_service_account()</a></code> and support the use of a service account to impersonate a normal user (<a href="https://github.com/tidyverse/googledrive/issues/413" class="external-link">#413</a>).</p></li>
<li><p>All requests now route through <code><a href="https://gargle.r-lib.org/reference/request_retry.html" class="external-link">gargle::request_retry()</a></code> (<a href="https://github.com/tidyverse/googledrive/issues/380" class="external-link">#380</a>).</p></li>
<li><p><code><a href="../reference/drive_scopes.html">drive_scopes()</a></code> is a new function to access scopes relevant to the Drive API. When called without arguments, <code><a href="../reference/drive_scopes.html">drive_scopes()</a></code> returns a named vector of scopes, where the names are the associated short aliases. <code><a href="../reference/drive_scopes.html">drive_scopes()</a></code> can also be called with a character vector; any element that’s recognized as a short alias is replaced with the associated full scope (<a href="https://github.com/tidyverse/googledrive/issues/430" class="external-link">#430</a>).</p></li>
<li><p>Various internal changes to sync up with gargle v1.5.0.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.0" id="googledrive-210">googledrive 2.1.0<a class="anchor" aria-label="anchor" href="#googledrive-210"></a></h2><p class="text-muted">CRAN release: 2023-03-22</p>
<div class="section level3">
<h3 id="syncing-up-with-gargle-2-1-0">Syncing up with gargle<a class="anchor" aria-label="anchor" href="#syncing-up-with-gargle-2-1-0"></a></h3>
<p>Version 1.3.0 of gargle introduced some changes around OAuth and googledrive is syncing up that:</p>
<ul><li>
<code><a href="../reference/drive_auth_configure.html">drive_oauth_client()</a></code> is a new function to replace the now-deprecated <code><a href="../reference/googledrive-deprecated.html">drive_oauth_app()</a></code>.</li>
<li>The new <code>client</code> argument of <code><a href="../reference/drive_auth_configure.html">drive_auth_configure()</a></code> replaces the now-deprecated <code>app</code> argument.</li>
<li>The documentation of <code><a href="../reference/drive_auth_configure.html">drive_auth_configure()</a></code> emphasizes that the preferred way to “bring your own OAuth client” is by providing the JSON downloaded from Google Developers Console.</li>
</ul></div>
<div class="section level3">
<h3 id="shared-drives-2-1-0">Shared drives<a class="anchor" aria-label="anchor" href="#shared-drives-2-1-0"></a></h3>
<p><code>drive_ls(recursive = TRUE)</code> now works when the target folder is on a shared drive (<a href="https://github.com/tidyverse/googledrive/issues/265" class="external-link">#265</a>, <a href="https://github.com/Falnesio" class="external-link">@Falnesio</a>).</p>
<p><code><a href="../reference/drive_mv.html">drive_mv()</a></code> no longer errors with “A shared drive item must have exactly one parent.” when moving a file on a shared drive (<a href="https://github.com/tidyverse/googledrive/issues/377" class="external-link">#377</a>).</p>
</div>
<div class="section level3">
<h3 id="other-2-1-0">Other<a class="anchor" aria-label="anchor" href="#other-2-1-0"></a></h3>
<p><code><a href="../reference/drive_auth.html">drive_auth()</a></code> now warns if the user specifies both <code>email</code> and <code>path</code>, because this is almost always an error (<a href="https://github.com/tidyverse/googledrive/issues/420" class="external-link">#420</a>).</p>
<p><code><a href="../reference/googledrive-deprecated.html">drive_auth_config()</a></code> was deprecated in googledrive 1.0.0 (released 2019-08-19) and is now defunct.</p>
<p><code><a href="../reference/googledrive-deprecated.html">drive_example()</a></code> was deprecated in googledrive 2.0.0 (released 2021-07-08) and is now defunct.</p>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.0" id="googledrive-200">googledrive 2.0.0<a class="anchor" aria-label="anchor" href="#googledrive-200"></a></h2><p class="text-muted">CRAN release: 2021-07-08</p>
<div class="section level3">
<h3 id="team-drives-are-dead-long-live-shared-drives-2-0-0">Team Drives are dead! Long live shared drives!<a class="anchor" aria-label="anchor" href="#team-drives-are-dead-long-live-shared-drives-2-0-0"></a></h3>
<p>Google Drive has rebranded Team Drives as <strong>shared drives</strong>. While anyone can have a <strong>My Drive</strong>, shared drives are only available for Google Workspace (previously known as G Suite). Shared drives and the files within are owned by a team/organization, as opposed to an individual.</p>
<p>In googledrive, all <code>team_drive_*()</code> functions have been deprecated, in favor of their <code>shared_drive_*()</code> successors. Likewise, any <code>team_drive</code> argument has been deprecated, in favor of a new <code>shared_drive</code> argument. The terms used to describe which collections to search have also changed slightly, with <code>"allDrives"</code> replacing <code>"all"</code>. This applies to the <code>corpus</code> argument of <code><a href="../reference/drive_find.html">drive_find()</a></code> and <code><a href="../reference/drive_get.html">drive_get()</a></code>.</p>
<p>Where to learn more:</p>
<ul><li>
<a href="https://workspaceupdates.googleblog.com/2019/04/shared-drives.html" class="external-link">Team Drives is being renamed to shared drives</a> from Google Workspace blog</li>
<li>
<a href="https://cloud.google.com/blog/products/application-development/upcoming-changes-to-the-google-drive-api-and-google-picker-api" class="external-link">Upcoming changes to the Google Drive API and Google Picker API</a> from the Google Cloud blog</li>
</ul></div>
<div class="section level3">
<h3 id="single-parenting-and-shortcuts-2-0-0">Single parenting and shortcuts<a class="anchor" aria-label="anchor" href="#single-parenting-and-shortcuts-2-0-0"></a></h3>
<p>As of 2020-09-30, Drive no longer allows a file to be placed in multiple folders; going forward, every file will have exactly 1 parent folder. In many cases that parent is just the top-level or root folder of your “My Drive” or of a shared drive.</p>
<p>This change has been accompanied by the introduction of file <strong>shortcuts</strong>, which function much like symbolic or “soft” links. Shortcuts are the new way to make a file appear to be in more than one place or, said another way, the new way for one Drive file to be associated with more than one Drive filepath. A shortcut is a special type of Drive file, characterized by the <code>application/vnd.google-apps.shortcut</code> MIME type. You can make a shortcut to any Drive file, including to a Drive folder.</p>
<p>Drive has been migrating existing files to the one-parent state, i.e., “single parenting” them. Drive selects the most suitable parent folder to keep, “based on the hierarchy’s properties”, and replaces any other parent-child relationships with a shortcut.</p>
<p>New functions related to shortcuts:</p>
<ul><li>
<code><a href="../reference/shortcut_create.html">shortcut_create()</a></code>: creates a shortcut to a specific Drive file (or folder).</li>
<li>
<code><a href="../reference/shortcut_resolve.html">shortcut_resolve()</a></code>: resolves a shortcut to its target, i.e. the file it refers to. Works for multiple files at once, i.e. the input can be a mix of shortcuts and non-shortcuts. The non-shortcuts are passed through and the shortcuts are replaced by their targets.</li>
</ul><p>How interacts with googledrive’s support for specifying file by filepath:</p>
<ul><li>Main principle: shortcuts are first-class Drive files that we assume users will need to manipulate with googledrive. In general, there is no automatic resolution to the target file.</li>
<li>
<code>drive_reveal(what = "path")</code> returns the canonical path, i.e. there will be no shortcuts among the non-terminal “folder” parts of the returned path.</li>
<li>
<code>drive_get(path = "foo/")</code> can retrieve a folder named “foo” or a shortcut named “foo”, whose target is a folder.</li>
<li>When a shortcut-to-a-folder is specified as the <code>path</code>, in a context where it unambiguously specifies a parent folder, the <code>path</code> <strong>is</strong> auto-resolved to its target folder. This is the exception to the “no automatic resolution” rule. Functions affected:
<ul><li><code>drive_ls(path, ...)</code></li>
<li>
<code>drive_create(name, path, ...)</code> and its convenience wrappers <code><a href="../reference/drive_mkdir.html">drive_mkdir()</a></code> and <code><a href="../reference/shortcut_create.html">shortcut_create()</a></code>
</li>
<li><code>drive_cp(file, path, ...)</code></li>
<li><code>drive_mv(file, path, ...)</code></li>
<li>
<code>drive_upload(media, path, ...)</code> and its close friend <code><a href="../reference/drive_put.html">drive_put()</a></code>
</li>
</ul></li>
</ul><p>Further reading about changes to the Drive folder model:</p>
<ul><li><a href="https://workspace.google.com/blog/product-announcements/simplifying-google-drives-folder-structure-and-sharing-models" class="external-link">Simplifying Google Drive’s folder structure and sharing models</a></li>
<li><a href="https://developers.google.com/drive/api/v3/ref-single-parent" class="external-link">Single-parenting behavior changes</a></li>
<li><a href="https://developers.google.com/drive/api/v3/shortcuts" class="external-link">Create a shortcut to a Drive file</a></li>
<li>Find files &amp; folders with Google Drive shortcuts: <code>https://support.google.com/drive/answer/9700156</code>
</li>
</ul></div>
<div class="section level3">
<h3 id="user-interface-2-0-0">User interface<a class="anchor" aria-label="anchor" href="#user-interface-2-0-0"></a></h3>
<p>The user interface has gotten more stylish, thanks to the cli package (<a href="https://cli.r-lib.org" class="external-link uri">https://cli.r-lib.org</a>). All informational messages, warnings, and errors are now emitted via cli, which uses rlang’s condition functions under-the-hood.</p>
<p><code>googledrive_quiet</code> is a new option to suppress informational messages from googledrive. Unless it’s explicitly set to <code>TRUE</code>, the default is to message.</p>
<p>The <code>verbose</code> argument of all <code>drive_*()</code> functions is deprecated and will be removed in a future release. In the current release, <code>verbose = FALSE</code> is still honored, but generates a warning.</p>
<p><code><a href="../reference/googledrive-configuration.html">local_drive_quiet()</a></code> and <code><a href="../reference/googledrive-configuration.html">with_drive_quiet()</a></code> are <a href="https://withr.r-lib.org" class="external-link">withr-style</a> convenience helpers for setting <code>googledrive_quiet = TRUE</code> for some limited scope.</p>
</div>
<div class="section level3">
<h3 id="other-changes-2-0-0">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-2-0-0"></a></h3>
<ul><li>
<p>We now share a variety of world-readable, persistent example files on Drive, for use in examples and documentation. These remote example files complement the local example files that were already included in googledrive.</p>
<p><code><a href="../reference/googledrive-deprecated.html">drive_example()</a></code> is deprecated in favor of these accessors for example files:</p>
<ul><li>Plural forms:<code><a href="../reference/drive_examples.html">drive_examples_remote()</a></code>, <code><a href="../reference/drive_examples.html">drive_examples_local()</a></code>
</li>
<li>Singular forms: <code><a href="../reference/drive_examples.html">drive_example_remote()</a></code>, <code><a href="../reference/drive_examples.html">drive_example_local()</a></code>
</li>
</ul></li>
<li><p><code><a href="../reference/drive_read_string.html">drive_read_string()</a></code> and <code><a href="../reference/drive_read_string.html">drive_read_raw()</a></code> are new functions that read the content of a Drive file directly into R, skipping the step of downloading to a local file (<a href="https://github.com/tidyverse/googledrive/issues/81" class="external-link">#81</a>).</p></li>
<li><p><code>drive_reveal(what = "property_name")</code> now works for any property found in the file metadata stored in the <code>drive_resource</code> column. The new column is also simplified in more cases now, e.g. to <code>character</code> or <code>logical</code>. If the <code>property_name</code> suggests it’s a date-time, we return <code>POSIXct</code>.</p></li>
<li>
<p>We’ve modernized the mechanisms by which the <code>dribble</code> class is (or is not) retained by various data frame operations. This boils down to updating or adding methods used by the base, dplyr, pillar/tibble, and vctrs packages.</p>
<p>We focus on compatibility with dplyr &gt;= 1.0.0, which was released a year ago. googledrive only Suggests dplyr, so all this really means is that <code>dribble</code> manipulation via dplyr now works best with dplyr &gt;= 1.0.0.</p>
</li>
<li>
<p>The <code>drive_id</code> S3 class is now implemented more fully, using the vctrs package (<a href="https://github.com/tidyverse/googledrive/issues/93" class="external-link">#93</a>, <a href="https://github.com/tidyverse/googledrive/issues/364" class="external-link">#364</a>):</p>
<ul><li>The <code>drive_id</code> class will persist after mundane operations, like subsetting.</li>
<li>You can no longer put strings that are obviously invalid into a <code>drive_id</code> object.</li>
<li>The <code>id</code> column of a <code>dribble</code> is now an instance of <code>drive_id</code>.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="dependency-changes-2-0-0">Dependency changes<a class="anchor" aria-label="anchor" href="#dependency-changes-2-0-0"></a></h3>
<p>cli, lifecycle, and withr are new in Imports.</p>
<p>pillar and vctrs are new in Imports, but were already indirect hard dependencies via tibble.</p>
<p>mockr is new in Suggests.</p>
<p>curl moves from Imports to Suggests, but remains an indirect hard dependency.</p>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.1" id="googledrive-101">googledrive 1.0.1<a class="anchor" aria-label="anchor" href="#googledrive-101"></a></h2><p class="text-muted">CRAN release: 2020-05-05</p>
<p>Patch release to modify a test for compatibility with an upcoming release of gargle.</p>
<p><code><a href="../reference/drive_share.html">drive_share()</a></code> gains awareness of the <code>"fileOrganizer"</code> role (<a href="https://github.com/tidyverse/googledrive/issues/302" class="external-link">#302</a>).</p>
<p>Better handling of filenames that include characters that have special meaning in a regular expression (<a href="https://github.com/tidyverse/googledrive/issues/292" class="external-link">#292</a>).</p>
<p><code><a href="../reference/drive_find.html">drive_find()</a></code> explicitly checks for and eliminates duplicate records for a file ID, guarding against repetition in the paginated results returned by the API. It would seem that this should never happen, but there is some indication that it does. (<a href="https://github.com/tidyverse/googledrive/issues/272" class="external-link">#272</a>, <a href="https://github.com/tidyverse/googledrive/issues/277" class="external-link">#277</a>, <a href="https://github.com/tidyverse/googledrive/issues/279" class="external-link">#279</a>, <a href="https://github.com/tidyverse/googledrive/issues/281" class="external-link">#281</a>)</p>
<p><code><a href="../reference/drive_share.html">drive_share_anyone()</a></code> is a new convenience wrapper that makes a file readable by “anyone with a link”.</p>
<p><code><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble()</a></code> method for <code>dribble</code> objects now passes <code>...</code> through, which could apply, for example, to tibble’s <code>.name_repair</code> argument.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="googledrive-100">googledrive 1.0.0<a class="anchor" aria-label="anchor" href="#googledrive-100"></a></h2><p class="text-muted">CRAN release: 2019-08-19</p>
<p>The release of version 1.0.0 marks two events:</p>
<ul><li>The overall design of googledrive has survived ~2 years on CRAN, with very little need for change. The API and feature set is fairly stable.</li>
<li>There are changes in the auth interface that are not backwards compatible.</li>
</ul><p>There is also new functionality that makes it less likely you’ll create multiple files with the same name, without actually meaning to.</p>
<div class="section level3">
<h3 id="auth-from-gargle-1-0-0">Auth from gargle<a class="anchor" aria-label="anchor" href="#auth-from-gargle-1-0-0"></a></h3>
<p>googledrive’s auth functionality now comes from the <a href="https://gargle.r-lib.org" class="external-link">gargle package</a>, which provides R infrastructure to work with Google APIs, in general. The same transition is happening in several other packages, such as <a href="https://bigrquery.r-dbi.org" class="external-link">bigrquery</a> and <a href="https://gmailr.r-lib.org" class="external-link">gmailr</a>. This makes user interfaces more consistent and makes two new token flows available in googledrive:</p>
<ul><li>Application Default Credentials</li>
<li>Service account tokens from the metadata server available to VMs running on GCE</li>
</ul><p>Where to learn more:</p>
<ul><li>Help for <a href="https://googledrive.tidyverse.org/reference/drive_auth.html"><code>drive_auth()</code></a> <em>all that most users need</em>
</li>
<li>
<em>details for more advanced users</em>
<ul><li><a href="https://googledrive.tidyverse.org/articles/articles/bring-your-own-app.html">Bring your own OAuth app or API key</a></li>
<li><a href="https://gargle.r-lib.org/articles/get-api-credentials.html" class="external-link">How to get your own API credentials</a></li>
<li><a href="https://gargle.r-lib.org/articles/non-interactive-auth.html" class="external-link">Non-interactive auth</a></li>
<li><a href="https://gargle.r-lib.org/articles/auth-from-web.html" class="external-link">Auth when using R in the browser</a></li>
<li><a href="https://gargle.r-lib.org/articles/how-gargle-gets-tokens.html" class="external-link">How gargle gets tokens</a></li>
<li><a href="https://gargle.r-lib.org/articles/articles/managing-tokens-securely.html" class="external-link">Managing tokens securely</a></li>
</ul></li>
</ul><div class="section level4">
<h4 id="changes-that-a-user-will-notice-1-0-0">Changes that a user will notice<a class="anchor" aria-label="anchor" href="#changes-that-a-user-will-notice-1-0-0"></a></h4>
<p>OAuth2 tokens are now cached at the user level, by default, instead of in <code>.httr-oauth</code> in the current project. We recommend that you delete any vestigial <code>.httr-oauth</code> files lying around your googledrive projects and re-authorize googledrive, i.e. get a new token, stored in the new way.</p>
<p>googledrive uses a new OAuth “app”, owned by a verified Google Cloud Project entitled “Tidyverse API Packages”, which is the project name you will see on the OAuth consent screen. See our new <a href="https://www.tidyverse.org/google_privacy_policy/" class="external-link">Privacy Policy</a> for details.</p>
<p>The local OAuth2 token key-value store now incorporates the associated Google user when indexing, which makes it easier to switch between Google identities.</p>
<p>The arguments and usage of <code><a href="../reference/drive_auth.html">drive_auth()</a></code> have changed.</p>
<ul><li>
<p>Previous signature (v0.1.3 and earlier)</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/drive_auth.html">drive_auth</a></span><span class="op">(</span></span>
<span>  oauth_token <span class="op">=</span> <span class="cn">NULL</span>,                       <span class="co"># use `token` now</span></span>
<span>  service_token <span class="op">=</span> <span class="cn">NULL</span>,                     <span class="co"># use `path` now</span></span>
<span>  reset <span class="op">=</span> <span class="cn">FALSE</span>,                            </span>
<span>  cache <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"httr_oauth_cache"</span><span class="op">)</span>,</span>
<span>  use_oob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"httr_oob_default"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Current signature (&gt;= v1.0.0)</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/drive_auth.html">drive_auth</a></span><span class="op">(</span></span>
<span>  email <span class="op">=</span> <span class="fu">gargle</span><span class="fu">::</span><span class="fu"><a href="https://gargle.r-lib.org/reference/gargle_options.html" class="external-link">gargle_oauth_email</a></span><span class="op">(</span><span class="op">)</span>,             <span class="co"># NEW!</span></span>
<span>  path <span class="op">=</span> <span class="cn">NULL</span>,                                      <span class="co"># was `service_token`</span></span>
<span>  scopes <span class="op">=</span> <span class="st">"https://www.googleapis.com/auth/drive"</span>, <span class="co"># NEW!</span></span>
<span>  cache <span class="op">=</span> <span class="fu">gargle</span><span class="fu">::</span><span class="fu"><a href="https://gargle.r-lib.org/reference/gargle_options.html" class="external-link">gargle_oauth_cache</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  use_oob <span class="op">=</span> <span class="fu">gargle</span><span class="fu">::</span><span class="fu"><a href="https://gargle.r-lib.org/reference/gargle_options.html" class="external-link">gargle_oob_default</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  token <span class="op">=</span> <span class="cn">NULL</span>                                      <span class="co"># was `oauth_token`</span></span>
<span><span class="op">)</span></span></code></pre></div>
</li>
</ul><p>For full details see the resources listed in <em>Where to learn more</em> above. The change that probably affects the most code is the way to provide a service account token: - Previously: <code>drive_auth(service_token = "/path/to/your/service-account-token.json")</code> (v0.1.3 and earlier) - Now: <code>drive_auth(path = "/path/to/your/service-account-token.json")</code> (&gt;= v1.0.0)</p>
<p>Auth configuration has also changed:</p>
<ul><li>
<code><a href="../reference/drive_auth_configure.html">drive_auth_configure()</a></code> is a variant of the now-deprecated <code><a href="../reference/googledrive-deprecated.html">drive_auth_config()</a></code> whose explicit and only job is to <em>set</em> aspects of the configuration, i.e. the OAuth app or API key.
<ul><li>Use <code><a href="../reference/googledrive-deprecated.html">drive_oauth_app()</a></code> (new) and <code><a href="../reference/drive_auth_configure.html">drive_api_key()</a></code> to <em>retrieve</em> a user-configured app or API key, if such exist.</li>
<li>These functions no longer return built-in auth assets, although built-in assets still exist and are used in the absence of user configuration.</li>
</ul></li>
<li>
<code><a href="../reference/drive_deauth.html">drive_deauth()</a></code> is how you go into a de-authorized state, i.e. send an API key in lieu of a token.</li>
</ul><p><code><a href="../reference/drive_has_token.html">drive_has_token()</a></code> is a new helper that simply reports whether a token is in place, without triggering the auth flow.</p>
<p>There are other small changes to the low-level developer-facing API:</p>
<ul><li>
<code>generate_request()</code> has been renamed to <code><a href="../reference/request_generate.html">request_generate()</a></code>.</li>
<li>
<code>make_request()</code> had been renamed to <code><a href="../reference/request_make.html">request_make()</a></code> and is a very thin wrapper around <code><a href="https://gargle.r-lib.org/reference/request_make.html" class="external-link">gargle::request_make()</a></code> that only adds googledrive’s user agent.</li>
<li>
<code>build_request()</code> has been removed. If you can’t do what you need with <code><a href="../reference/request_generate.html">request_generate()</a></code>, use <code><a href="https://gargle.r-lib.org/reference/request_develop.html" class="external-link">gargle::request_develop()</a></code> or <code><a href="https://gargle.r-lib.org/reference/request_develop.html" class="external-link">gargle::request_build()</a></code> directly.</li>
<li>
<code>process_response()</code> has been removed. Instead, use <code>gargle::response_process(response)</code>, as we do inside googledrive.</li>
</ul></div>
</div>
<div class="section level3">
<h3 id="overwrite--na--true--false-and-drive_put-1-0-0">
<code>overwrite = NA / TRUE / FALSE</code> and <code>drive_put()</code>
<a class="anchor" aria-label="anchor" href="#overwrite--na--true--false-and-drive_put-1-0-0"></a></h3>
<p>Google Drive doesn’t impose a 1-to-1 relationship between files and filepaths, the way your local file system does. Therefore, when working via the Drive API (instead of in the browser), it’s fairly easy to create multiple Drive files with the same name or filepath, without actually meaning to. This is perfectly valid on Drive, which identifies file by ID, but can be confusing and undesirable for humans.</p>
<p>googledrive v1.0.0 offers some new ways to fight this:</p>
<ul><li>All functions that create a new item or rename/move an existing item have gained an <code>overwrite</code> argument.</li>
<li>
<code><a href="../reference/drive_put.html">drive_put()</a></code> is a new convenience wrapper that figures out whether to call <code><a href="../reference/drive_upload.html">drive_upload()</a></code> or <code><a href="../reference/drive_update.html">drive_update()</a></code>.</li>
</ul><p>Changes inspired by <a href="https://github.com/tidyverse/googledrive/issues/230" class="external-link">#230</a>.</p>
<div class="section level4">
<h4 id="overwrite--na--true--false-1-0-0"><code>overwrite = NA / TRUE / FALSE</code><a class="anchor" aria-label="anchor" href="#overwrite--na--true--false-1-0-0"></a></h4>
<p>These functions gain an <code>overwrite</code> argument:</p>
<ul><li>
<code><a href="../reference/drive_create.html">drive_create()</a></code> <em>this whole function is new</em>
</li>
<li><code><a href="../reference/drive_cp.html">drive_cp()</a></code></li>
<li><code><a href="../reference/drive_mkdir.html">drive_mkdir()</a></code></li>
<li><code><a href="../reference/drive_mv.html">drive_mv()</a></code></li>
<li><code><a href="../reference/drive_rename.html">drive_rename()</a></code></li>
<li><code><a href="../reference/drive_upload.html">drive_upload()</a></code></li>
</ul><p>The default of <code>overwrite = NA</code> corresponds to the current behaviour, which is to “Just. Do. It.”, i.e. to not consider pre-existing files at all.</p>
<p><code>overwrite = TRUE</code> requests to move a pre-existing file at the target filepath to the trash, prior to creating the new item. If 2 or more files are found, an error is thrown, because it’s not clear which one(s) to trash.</p>
<p><code>overwrite = FALSE</code> means the new item will only be created if there is no pre-existing file at that filepath.</p>
<p>Existence checks based on filepath (or name) can be expensive. This is why the default is <code>overwrite = NA</code>, in addition to backwards compatibility.</p>
</div>
<div class="section level4">
<h4 id="drive_put-1-0-0"><code>drive_put()</code><a class="anchor" aria-label="anchor" href="#drive_put-1-0-0"></a></h4>
<p>Sometimes you have a file you will repeatedly send to Drive, i.e. the first time you run an analysis, you create the file and, when you re-run it, you update the file. Previously this was hard to express with googledrive.</p>
<p><code><a href="../reference/drive_put.html">drive_put()</a></code> is useful here and refers to the HTTP verb <code>PUT</code>: create the thing if it doesn’t exist or, if it does, replace its contents. A good explanation of <code>PUT</code> is <a href="https://medium.com/backticks-tildes/restful-api-design-put-vs-patch-4a061aa3ed0b" class="external-link">RESTful API Design – PUT vs PATCH</a>.</p>
<p>In pseudo-code, here’s the basic idea of <code><a href="../reference/drive_put.html">drive_put()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>target_filepath <span class="ot">&lt;-</span> <span class="er">&lt;</span>determined from arguments <span class="st">`</span><span class="at">path</span><span class="st">`</span>, <span class="st">`</span><span class="at">name</span><span class="st">`</span>, and <span class="st">`</span><span class="at">media</span><span class="st">`</span><span class="sc">&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>hits <span class="ot">&lt;-</span> <span class="er">&lt;</span>get all Drive files at target_filepath<span class="sc">&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="cf">if</span> (no hits) {</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a> <span class="fu">drive_upload</span>(media, path, name, type, ..., verbose)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (exactly <span class="dv">1</span> hit) {</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a> <span class="fu">drive_update</span>(hit, media, ..., verbose)</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a> ERROR</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="other-changes-1-0-0">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-1-0-0"></a></h3>
<p>All functions that support <code>...</code> as a way to pass more parameters to the Drive API now have “tidy dots semantics”: <code>!!!</code> is supported for splicing and <code>!!</code> can be used on the LHS of <code>:=</code>. Full docs are in <a href="https://rlang.r-lib.org/reference/dyn-dots.html" class="external-link">dynamic dots</a>.</p>
<p><code><a href="../reference/drive_find.html">drive_find()</a></code> now sorts by “recency”, by default.</p>
<p><code><a href="../reference/drive_create.html">drive_create()</a></code> is a new function that creates a new empty file, with an optional file type specification (<a href="https://github.com/tidyverse/googledrive/issues/258" class="external-link">#258</a>, <a href="https://github.com/ianmcook" class="external-link">@ianmcook</a>). <code><a href="../reference/drive_mkdir.html">drive_mkdir()</a></code> becomes a thin wrapper around <code><a href="../reference/drive_create.html">drive_create()</a></code>, with the file type hard-wired to “folder”.</p>
<p>In <code><a href="../reference/drive_mkdir.html">drive_mkdir()</a></code>, the optional parent directory is now known as <code>path</code> instead of <code>parent</code>. This is more consistent with everything else in googledrive, which became very obvious when adding <code><a href="../reference/drive_create.html">drive_create()</a></code> and the general <code>overwrite</code> functionality.</p>
<p><code><a href="../reference/drive_empty_trash.html">drive_empty_trash()</a></code> now exploits the correct endpoint (as opposed to deleting individual files) and is therefore much faster (<a href="https://github.com/tidyverse/googledrive/issues/203" class="external-link">#203</a>).</p>
<p>Colaboratory notebooks now have some MIME type support, in terms of the <code>type</code> argument in various functions (<a href="https://colab.research.google.com/" class="external-link uri">https://colab.research.google.com/</a>). The internal table of known MIME types includes <code>"application/vnd.google.colab"</code>, which is associated with the file extension <code>.ipynb</code> and the human-oriented nickname <code>"colab"</code> (<a href="https://github.com/tidyverse/googledrive/issues/207" class="external-link">#207</a>).</p>
<p><code><a href="../reference/drive_endpoints.html">drive_endpoints()</a></code> gains a singular friend, <code><a href="../reference/drive_endpoints.html">drive_endpoint()</a></code> which returns exactly one endpoint. These helpers index into the internal list of Drive API endpoints with <code>[</code> and <code>[[</code>, respectively.</p>
</div>
<div class="section level3">
<h3 id="dependency-changes-1-0-0">Dependency changes<a class="anchor" aria-label="anchor" href="#dependency-changes-1-0-0"></a></h3>
<p>R 3.1 is no longer explicitly supported or tested. Our general practice is to support the current release (3.6), devel, and the 4 previous versions of R (3.5, 3.4, 3.3, 3.2). See <a href="https://www.tidyverse.org/blog/2019/04/r-version-support/" class="external-link">Which versions of R do tidyverse packages support?</a>.</p>
<p>gargle and magrittr are newly Imported.</p>
<p>rprojroot has been removed from Suggests, because we can now use a version of testthat recent enough to offer <code><a href="https://testthat.r-lib.org/reference/test_path.html" class="external-link">testthat::test_path()</a></code>.</p>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.3" id="googledrive-013">googledrive 0.1.3<a class="anchor" aria-label="anchor" href="#googledrive-013"></a></h2><p class="text-muted">CRAN release: 2019-01-24</p>
<p>Minor patch release for compatibility with the imminent release of purrr 0.3.0.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="googledrive-012">googledrive 0.1.2<a class="anchor" aria-label="anchor" href="#googledrive-012"></a></h2><p class="text-muted">CRAN release: 2018-10-06</p>
<ul><li>Internal usage of <code>glue::collapse()</code> modified to call <code><a href="https://glue.tidyverse.org/reference/glue_collapse.html" class="external-link">glue::glue_collapse()</a></code> if glue v1.3.0 or later is installed and <code>glue::collapse()</code> otherwise. Eliminates a deprecation warning emanating from glue. (<a href="https://github.com/tidyverse/googledrive/issues/222" class="external-link">#222</a> <a href="https://github.com/jimhester" class="external-link">@jimhester</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="googledrive-011">googledrive 0.1.1<a class="anchor" aria-label="anchor" href="#googledrive-011"></a></h2><p class="text-muted">CRAN release: 2017-08-28</p>
<ul><li>initial CRAN release</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Lucy D’Agostino McGowan, <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

