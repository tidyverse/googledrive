<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Make a request for the Google Drive v3 API — make_request • googledrive</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- tidyverse -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">googledrive</a>
        <small class="tidyverse">part of the <a href="http://tidyverse.org">tidyverse</a></small>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/googledrive">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Make a request for the Google Drive v3 API</h1>
    </div>

    
    <p>Low-level functions to execute one or more Drive API requests and, perhaps,
process the response(s). Most users should, instead, use higher-level
wrappers that facilitate common tasks, such as uploading or downloading Drive
files. The functions here are intended for internal use and for programming
around the Drive API. Three functions are documented here:</p><ul>
<li><p><code>make_request()</code> does the bare minimum: just calls an HTTP method, only
adding the googledrive user agent. Typically the input is created with
<code><a href='generate_request.html'>generate_request()</a></code> or <code><a href='generate_request.html'>build_request()</a></code> and the output is
processed with <code><a href='process_response.html'>process_response()</a></code>.</p></li>
<li><p><code>do_request()</code> is simply <code><a href='process_response.html'>process_response(make_request(x, ...))</a></code>. It
exists only because we had to make <code>do_paginated_request()</code> and it felt
weird to not make the equivalent for a single request.</p></li>
<li><p><code>do_paginated_request()</code> executes the input request <strong>with page
traversal</strong>. It is impossible to separate paginated requests into a "make
request" step and a "process request" step, because the token for the
next page must be extracted from the content of the current page.
Therefore this function does both and returns a list of processed
responses, one per page.</p></li>
</ul>
    

    <pre class="usage"><span class='fu'>make_request</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='fu'>do_request</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='fu'>do_paginated_request</span>(<span class='no'>x</span>, <span class='no'>...</span>, <span class='kw'>n_max</span> <span class='kw'>=</span> <span class='fl'>Inf</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>res</span>) <span class='fl'>1</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>List, holding the components for an HTTP request, presumably created
with <code><a href='generate_request.html'>generate_request()</a></code> or <code><a href='generate_request.html'>build_request()</a></code>. Should contain the
<code>method</code>, <code>path</code>, <code>query</code>, <code>body</code>, <code>token</code>, and <code>url</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Optional arguments passed through to the HTTP method.</p></td>
    </tr>
    <tr>
      <th>n_max</th>
      <td><p>Maximum number of items to return. Defaults to <code>Inf</code>, i.e. there
is no limit and we keep making requests until we get all items.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>Function that computes the number of items in one response or page.
The default function always returns <code>1</code> and therefore treats each page as
an item. If you know more about the structure of the response, you can
pass another function to count and threshhold, for example, the number of
files or comments.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical, indicating whether to print informative messages
(default <code>TRUE</code>).</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>make_request()</code>: Object of class <code>response</code> from httr.

<code>do_request()</code>: List representing the content returned by a single
request.

<code>do_paginated_request()</code>: List of lists, representing the returned
content, one component per page.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Other low-level API functions: <code><a href='generate_request.html'>generate_request</a></code>,
  <code><a href='process_response.html'>process_response</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'>## build a request for an endpoint that is:</span>
<span class='co'>##   * paginated</span>
<span class='co'>##   * NOT privileged in googledrive, i.e. not covered by generate_request()</span>
<span class='co'>## "comments" are a great example</span>
<span class='co'>## https://developers.google.com/drive/v3/reference/comments</span>
<span class='co'>##</span>
<span class='co'>## Practice with a target file with &gt; 2 comments</span>
<span class='co'>## Note that we request 2 items (comments) per page</span>
<span class='no'>req</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='generate_request.html'>build_request</a></span>(
  <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>"drive/v3/files/{fileId}/comments"</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"GET"</span>,
  <span class='kw'>params</span> <span class='kw'>=</span> <span class='fu'>list</span>(
    <span class='kw'>fileId</span> <span class='kw'>=</span> <span class='st'>"your-file-id-goes-here"</span>,
    <span class='kw'>fields</span> <span class='kw'>=</span> <span class='st'>"*"</span>,
    <span class='kw'>pageSize</span> <span class='kw'>=</span> <span class='fl'>2</span>
  ),
  <span class='kw'>token</span> <span class='kw'>=</span> <span class='kw pkg'>googledrive</span><span class='kw ns'>:::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/googledrive/topics/drive_token'>drive_token</a></span>()
)
<span class='co'>## make the paginated request, but cap it at 1 page</span>
<span class='co'>## should get back exactly two comments</span>
<span class='fu'>do_paginated_request</span>(<span class='no'>req</span>, <span class='kw'>n_max</span> <span class='kw'>=</span> <span class='fl'>1</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="tidyverse">
  <p>googledrive is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="http://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>Developed by Lucy D'Agostino McGowan, Jennifer Bryan, <a href='https://www.rstudio.com'><img src='http://tidyverse.org/rstudio-logo.svg' height='24' /></a>.</p>
  <p>Site built by <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67989-18', 'auto');
  ga('send', 'pageview');
</script>
      </footer>
   </div>

  </body>
</html>
